{"version":3,"file":"embed-plugin-url.js","sources":["../../../node_modules/just-extend/index.js","../../../node_modules/html-escape/index.js","../../../node_modules/html-linkify/index.js","../src/index.js"],"sourcesContent":["module.exports = extend;\n\n/*\n  var obj = {a: 3, b: 5};\n  extend(obj, {a: 4, c: 8}); // {a: 4, b: 5, c: 8}\n  obj; // {a: 4, b: 5, c: 8}\n\n  var obj = {a: 3, b: 5};\n  extend({}, obj, {a: 4, c: 8}); // {a: 4, b: 5, c: 8}\n  obj; // {a: 3, b: 5}\n\n  var arr = [1, 2, 3];\n  var obj = {a: 3, b: 5};\n  extend(obj, {c: arr}); // {a: 3, b: 5, c: [1, 2, 3]}\n  arr.push(4);\n  obj; // {a: 3, b: 5, c: [1, 2, 3, 4]}\n\n  var arr = [1, 2, 3];\n  var obj = {a: 3, b: 5};\n  extend(true, obj, {c: arr}); // {a: 3, b: 5, c: [1, 2, 3]}\n  arr.push(4);\n  obj; // {a: 3, b: 5, c: [1, 2, 3]}\n\n  extend({a: 4, b: 5}); // {a: 4, b: 5}\n  extend({a: 4, b: 5}, 3); {a: 4, b: 5}\n  extend({a: 4, b: 5}, true); {a: 4, b: 5}\n  extend('hello', {a: 4, b: 5}); // throws\n  extend(3, {a: 4, b: 5}); // throws\n*/\n\nfunction extend(/* [deep], obj1, obj2, [objn] */) {\n  var args = [].slice.call(arguments);\n  var deep = false;\n  if (typeof args[0] == 'boolean') {\n    deep = args.shift();\n  }\n  var result = args[0];\n  if (!result || (typeof result != 'object' && typeof result != 'function')) {\n    throw new Error('extendee must be an object');\n  }\n  var extenders = args.slice(1);\n  var len = extenders.length;\n  for (var i = 0; i < len; i++) {\n    var extender = extenders[i];\n    for (var key in extender) {\n      if (extender.hasOwnProperty(key)) {\n        var value = extender[key];\n        if (deep && isCloneable(value)) {\n          var base = Array.isArray(value) ? [] : {};\n          result[key] = extend(true, result.hasOwnProperty(key) ? result[key] : base, value);\n        } else {\n          result[key] = value;\n        }\n      }\n    }\n  }\n  return result;\n}\n\nfunction isCloneable(obj) {\n  return Array.isArray(obj) || {}.toString.call(obj) == '[object Object]';\n}\n","\"use strict\";\n\n/* From Twitter's Hogan.js */\n\nvar rAmp = /&/g,\n\trLt = /</g,\n\trGt = />/g,\n\trApos =/\\'/g,\n\trQuot = /\\\"/g,\n\thChars =/[&<>\\\"\\']/;\n\nfunction coerceToString(val) {\n\treturn String((val === null || val === undefined) ? '' : val);\n}\n\nmodule.exports = function(str) {\n\tstr = coerceToString(str);\n\n\treturn hChars.test(str)\n\t\t? str\n\t\t\t.replace(rAmp,'&amp;')\n\t\t\t.replace(rLt,'&lt;')\n\t\t\t.replace(rGt,'&gt;')\n\t\t\t.replace(rApos,'&#39;')\n\t\t\t.replace(rQuot, '&quot;')\n\t\t: str;\n};\n","// Takes plain text and replaces links with HTML anchor elements. Based on\n// https://github.com/thejh/node-linkify\n\"use strict\";\n\n// Link regex\n// See http://daringfireball.net/2010/07/improved_regex_for_matching_urls\nvar rLink = /\\b((?:https?:\\/\\/|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))/gi;\n\n// Email regex\nvar rEmail = /\\b(([a-zA-Z0-9\\-\\_\\.])+(\\+[a-zA-Z0-9]*)?@[a-zA-Z\\_\\-]+?(\\.[a-zA-Z]{2,6})+)/gim;\n\nvar escape = require(\"html-escape\");\n\nmodule.exports = function(text, options) {\n\tif ( ! options) options = {};\n\n\tvar retval = \"\", cur = 0, match;\n\n\tvar escapeFn = options.escape === false ? function(str) { return str; } : escape;\n\n\twhile (match = rLink.exec(text)) {\n\t\tretval += escapeFn(text.slice(cur, match.index));\n\t\tretval += anchor(match[0], options.attributes);\n\t\tcur = rLink.lastIndex;\n\t}\n\n\tretval += escapeFn(text.slice(cur));\n\tretval = emails(retval, options.attributes);\n\n\treturn retval;\n};\n\n// Return an anchor element for the url\nfunction anchor(url, attrs) {\n\tvar text = escape(url),\n\t\thref = url;\n\n\t// Ensure protocol at beginning of url\n\tif (!/^[a-zA-Z]{1,6}:/.test(href)) {\n\t\thref = 'http://' + href;\n\t}\n\n\tvar attrsString = combine({ href: href }, attrs);\n\n\treturn \"<a \" + attrsString + \">\" + text + \"</a>\";\n}\n\n// combine attrs objects into single string\nfunction combine() {\n\treturn Array.prototype.slice.call(arguments)\n\t\t.map(attributes)\n\t\t.filter(Boolean)\n\t\t.join(\" \");\n}\n\n// Replace emails in text with anchor elements\nfunction emails(text, attrs) {\n\tvar attrsString = attributes(attrs);\n\n\treturn text.replace(rEmail, function(match, email) {\n\t\tvar elAttrs = attributes({ href: \"mailto:\" + email });\n\t\tif (attrsString) {\n\t\t\telAttrs += \" \" + attrsString;\n\t\t}\n\n\t\treturn \"<a \" + elAttrs + \">\" + escape(email) + \"</a>\";\n\t});\n}\n\nfunction attributes(attrs) {\n\tif ( ! attrs) return \"\";\n\treturn Object.keys(attrs).map(function(name) {\n\t\tvar value = attrs[name];\n\t\treturn escape(name) + \"=\\\"\" + escape(value) + \"\\\"\";\n\t}).join(\" \");\n}\n","import extend from \"just-extend\"\nimport linkify from \"html-linkify\"\n\nconst id = \"url\"\n\nexport default function url(opts) {\n  const defaultOptions = {\n    attributes: {},\n\n    // setting this to true will mess up characters like \"\n    escape: false\n  }\n\n  const { attributes, escape } = extend({}, defaultOptions, opts)\n  return {\n    id,\n    async transform(options) {\n      return extend({}, options, {\n        result: linkify(options.result, { attributes, escape })\n      })\n    }\n  }\n}\n\nurl.id = id\n"],"names":["escape","const","extend","linkify"],"mappings":"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"}