'use strict';

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var extend = _interopDefault(require('just-extend'));
var linkify = _interopDefault(require('html-linkify'));

const id = "url";
function url(opts) {
    const defaultOptions = {
        attributes: {},
        escape: false
    };
    const {attributes, escape} = extend({}, defaultOptions, opts);
    return {
        id,
        transform(options) {
            return new Promise(($return, $error) => $return(extend({}, options, {
                result: linkify(options.result, {
                    attributes,
                    escape
                })
            })));
        }
    };
}

url.id = id;

module.exports = url;
