{"version":3,"file":"embed-plugin-youtube.min.js","sources":["../../../node_modules/just-extend/index.js","../../embed-plugin-utilities/src/string-replace-async.js","../../embed-plugin-utilities/src/insert.js","../src/index.js","../../../node_modules/is-dom/index.js","../../../node_modules/youtube-regex/index.js","../../../node_modules/just-truncate/index.js","../../embed-plugin-utilities/src/with-details-template.js","../../embed-plugin-utilities/src/without-details-template.js","../../embed-plugin-base/src/index.js"],"sourcesContent":["module.exports = extend;\n\n/*\n  var obj = {a: 3, b: 5};\n  extend(obj, {a: 4, c: 8}); // {a: 4, b: 5, c: 8}\n  obj; // {a: 4, b: 5, c: 8}\n\n  var obj = {a: 3, b: 5};\n  extend({}, obj, {a: 4, c: 8}); // {a: 4, b: 5, c: 8}\n  obj; // {a: 3, b: 5}\n\n  var arr = [1, 2, 3];\n  var obj = {a: 3, b: 5};\n  extend(obj, {c: arr}); // {a: 3, b: 5, c: [1, 2, 3]}\n  arr.push(4);\n  obj; // {a: 3, b: 5, c: [1, 2, 3, 4]}\n\n  var arr = [1, 2, 3];\n  var obj = {a: 3, b: 5};\n  extend(true, obj, {c: arr}); // {a: 3, b: 5, c: [1, 2, 3]}\n  arr.push(4);\n  obj; // {a: 3, b: 5, c: [1, 2, 3]}\n\n  extend({a: 4, b: 5}); // {a: 4, b: 5}\n  extend({a: 4, b: 5}, 3); {a: 4, b: 5}\n  extend({a: 4, b: 5}, true); {a: 4, b: 5}\n  extend('hello', {a: 4, b: 5}); // throws\n  extend(3, {a: 4, b: 5}); // throws\n*/\n\nfunction extend(/* [deep], obj1, obj2, [objn] */) {\n  var args = [].slice.call(arguments);\n  var deep = false;\n  if (typeof args[0] == 'boolean') {\n    deep = args.shift();\n  }\n  var result = args[0];\n  if (!result || (typeof result != 'object' && typeof result != 'function')) {\n    throw new Error('extendee must be an object');\n  }\n  var extenders = args.slice(1);\n  var len = extenders.length;\n  for (var i = 0; i < len; i++) {\n    var extender = extenders[i];\n    for (var key in extender) {\n      if (extender.hasOwnProperty(key)) {\n        var value = extender[key];\n        if (deep && isCloneable(value)) {\n          var base = Array.isArray(value) ? [] : {};\n          result[key] = extend(true, result.hasOwnProperty(key) ? result[key] : base, value);\n        } else {\n          result[key] = value;\n        }\n      }\n    }\n  }\n  return result;\n}\n\nfunction isCloneable(obj) {\n  return Array.isArray(obj) || {}.toString.call(obj) == '[object Object]';\n}\n","import extend from \"just-extend\"\n\nfunction matchAll(str, re) {\n  const matches = []\n  let res = re.exec(str)\n\n  while (res) {\n    matches.push(res)\n\n    if (!re.global) {\n      break\n    }\n\n    res = re.exec(str)\n  }\n  return matches\n}\n\nfunction replaceAll(str, matches) {\n  return matches.reverse().reduce(function(res, match) {\n    const prefix = res.slice(0, match.index)\n    const postfix = res.slice(match.index + match[0].length)\n\n    return prefix + match.replacement + postfix\n  }, str)\n}\n\nfunction assignReplacement(match, replacer) {\n  const args = match.concat([match.index, match.input])\n\n  return replacer.apply(null, args).then(function(res) {\n    return extend({}, match, { replacement: res })\n  })\n}\n\nfunction concurrency(matches, replacer) {\n  const promises = matches.map(function(match) {\n    return assignReplacement(match, replacer)\n  })\n\n  return Promise.all(promises)\n}\n\nfunction processString(str, re, replacer) {\n  const matches = matchAll(str, re)\n  const processor = concurrency\n\n  return processor(matches, replacer).then(function(matches) {\n    return replaceAll(str, matches)\n  })\n}\n\nfunction stringReplaceAsync(str, re, replacer) {\n  re.lastIndex = 0\n  try {\n    return Promise.resolve(processString(str, re, replacer))\n  } catch (e) {\n    return Promise.reject(e)\n  }\n}\n\nexport default stringReplaceAsync\n","import extend from \"just-extend\"\nimport stringReplaceAsync from \"./string-replace-async\"\n\nconst anchorRegex = /<a[^>]*>([^<]+)<\\/a>/gi\n\nfunction getAnchorRegex(regex) {\n  return new RegExp(`<a[^>]*>(${regex.source})<\\\\/a>`, \"gi\")\n}\n\n/**\n * Returns the matched regex data or whether the text has any matching string\n * @param regex Regex of the matching pattern\n * @param text String which has to be searched\n * @param test Return boolean or matching array\n * @returns {*} Boolean|Array\n */\nfunction isMatchPresent(regex, text, test = false) {\n  return test ? regex.test(text) : text.match(regex)\n}\n\n/**\n * Tells wheteher the matching string is present inside an anchor tag\n * @param text\n * @returns {*} Boolean\n * @param regex\n */\nfunction isAnchorTagApplied({ result, plugins = [] }, { regex }) {\n  return (\n    getAnchorRegex(regex).test(result) ||\n    plugins.filter(plugin => plugin.id === \"url\").length\n  )\n}\n\nfunction saveServiceName({ _services }, { id }, match) {\n  if (!_services.filter(x => x.match === match).length) {\n    _services.push({ id, match })\n  }\n}\n\nasync function pushEmbedContent(text, options, pluginOptions, index) {\n  const { regex } = pluginOptions\n  await stringReplaceAsync(text, regex, async (...args) => {\n    options._embeds.push({\n      content: await getTemplate(args, options, pluginOptions),\n      index: index || args.find(x => typeof x === \"number\")\n    })\n    saveServiceName(options, pluginOptions, args[0])\n  })\n  return options\n}\n\n/**\n * Save the embed code into an array that can be added later to the end of original string\n * @param opts\n * @param pluginOptions\n */\nasync function saveEmbedData(opts, pluginOptions) {\n  const { regex } = pluginOptions\n  let options = extend({}, opts)\n\n  if (isAnchorTagApplied(options, { regex })) {\n    await stringReplaceAsync(\n      options.result,\n      anchorRegex,\n      async (match, url, index) => {\n        if (!isMatchPresent(regex, match, true)) return match\n        saveServiceName(options, pluginOptions, match)\n        options = await pushEmbedContent(url, options, pluginOptions, index)\n        return match\n      }\n    )\n  } else {\n    options = pushEmbedContent(options.result, options, pluginOptions)\n  }\n\n  return options\n}\n\nfunction getMatch(regex, string) {\n  regex.lastIndex = 0\n  const matches = regex.exec(string)\n  regex.lastIndex = 0\n  return matches\n}\n\nasync function getTemplate(args, options, pluginOptions) {\n  const { _process, template } = pluginOptions\n  let data\n  if (_process) {\n    data = await _process(args, options, pluginOptions)\n  }\n  return template(args, options, pluginOptions, data)\n}\n\nasync function basicReplace(options, pluginOptions) {\n  const { result, replaceUrl } = options\n  const { regex, _replaceAnyways } = pluginOptions\n  return stringReplaceAsync(result, regex, async (...args) => {\n    saveServiceName(options, pluginOptions, args[0])\n    return replaceUrl || _replaceAnyways\n      ? getTemplate(args, options, pluginOptions)\n      : `${args[0]} ${await getTemplate(args, options, pluginOptions)}`\n  })\n}\n\nasync function anchorReplace(options, pluginOptions) {\n  const { result, replaceUrl } = options\n  const { regex, _replaceAnyways } = pluginOptions\n\n  return stringReplaceAsync(result, anchorRegex, async (match, url) => {\n    if (!isMatchPresent(regex, url, true)) {\n      return match\n    }\n\n    if (!(replaceUrl || _replaceAnyways)) {\n      const args = getMatch(regex, url)\n      saveServiceName(options, pluginOptions, args[0])\n      const t = await getTemplate(args, options, pluginOptions)\n      return args ? match + t : match\n    }\n    return stringReplaceAsync(url, regex, async (...args) => {\n      saveServiceName(options, pluginOptions, args[0])\n      return getTemplate(args, options, pluginOptions)\n    })\n  })\n}\n\n/**\n * Insert the embed code in the original string.\n * @param options\n * @param pluginOptions\n * @returns options\n */\nexport default async function(options, pluginOptions) {\n  const { inlineEmbed } = options\n  const { _ignoreAnchorCheck, _ignoreInlineCheck, regex } = pluginOptions\n\n  if (!inlineEmbed && !_ignoreInlineCheck) {\n    return saveEmbedData(options, pluginOptions)\n  }\n\n  let output\n\n  output =\n    isAnchorTagApplied(options, { regex }) && !_ignoreAnchorCheck\n      ? await anchorReplace(options, pluginOptions)\n      : await basicReplace(options, pluginOptions)\n\n  return extend({}, options, {\n    result: output\n  })\n}\n","import extend from \"just-extend\"\nimport isDom from \"is-dom\"\nimport ytRegex from \"youtube-regex\"\nimport base from \"embed-plugin-base\"\nimport {\n  withDetailsTemplate,\n  withoutDetailsTemplate\n} from \"embed-plugin-utilities\"\n\nconst id = \"youtube\"\nconst baseUrl = \"https://www.youtube.com/\"\n\n/**\n * Decorate data into a simpler structure\n * @param data\n * @returns {{title, thumbnail, rawDescription, views: *, likes: *, description: *, url: string, id, host: string}}\n */\nfunction formatData({ snippet, id }) {\n  return {\n    title: snippet.title,\n    thumbnail: snippet.thumbnails.medium.url,\n    description: snippet.description,\n    url: `${baseUrl}watch?v=${id}`,\n    embedUrl: `${baseUrl}embed/${id}`\n  }\n}\n\n/**\n * Fetch details of a particular youtube video\n * @param id\n * @param gAuthKey\n * @returns {Promise.<*>}\n */\nasync function fetchDetails(id, fetch, gAuthKey) {\n  try {\n    const res = await fetch(\n      `https://www.googleapis.com/youtube/v3/videos?id=${id}&key=${gAuthKey}&part=snippet,statistics`\n    )\n    const data = await res.json()\n    return data.items[0]\n  } catch (e) {\n    console.log(e)\n    return {}\n  }\n}\n\n/**\n * Function executed when a content is rendered on the client site.\n * @param input\n * @param clickClass\n * @param onVideoShow\n * @param height\n */\nfunction onLoad({ input }, { clickClass, onVideoShow, height }) {\n  if (!isDom(input)) {\n    throw new Error(\"input should be a DOM Element.\")\n  }\n  let classes = document.getElementsByClassName(clickClass)\n  for (let i = 0; i < classes.length; i++) {\n    classes[i].onclick = function() {\n      let url = this.getAttribute(\"data-url\")\n      onVideoShow(url)\n      url += \"?autoplay=1\"\n      this.parentNode.innerHTML = withoutDetailsTemplate(url, height, id)\n    }\n  }\n}\n\nfunction _process(args, { fetch }, { gAuthKey, details }) {\n  return details ? fetchDetails(args[1], fetch, gAuthKey) : Promise.resolve()\n}\n\nfunction youtube(opts) {\n  const defaultOptions = {\n    id,\n    regex: ytRegex(),\n    gAuthKey: \"\",\n    details: true,\n    height: 300,\n    clickClass: \"ejs-video-thumb\",\n    onVideoShow() {},\n    _onLoadInternal(options, pluginOptions) {\n      onLoad(options, pluginOptions)\n    },\n    onLoad() {},\n    async template(args, options, { details, height, clickClass }, data) {\n      const embedUrl = `${baseUrl}embed/${args[1]}`\n      return details\n        ? withDetailsTemplate(formatData(data), clickClass, true)\n        : withoutDetailsTemplate(embedUrl, height, id)\n    }\n  }\n\n  if (!opts.gAuthKey) {\n    throw new Error(\"You need to pass google auth key.\")\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts, {\n    _process\n  })\n  return base(pluginOptions)\n}\n\nyoutube.id = id\n\nexport default youtube\n","module.exports = isNode\n\nfunction isNode (val) {\n  return (!val || typeof val !== 'object')\n    ? false\n    : (typeof window === 'object' && typeof window.Node === 'object')\n      ? (val instanceof window.Node)\n      : (typeof val.nodeType === 'number') &&\n        (typeof val.nodeName === 'string')\n}\n","/**\n * youtube-regex <https://github.com/tunnckoCore/youtube-regex>\n *\n * Copyright (c) 2014 Charlike Mike Reagent, contributors.\n * Released under the MIT license.\n */\n\n'use strict';\n\nmodule.exports = function youtubeRegex() {\n  var regex = /(?:youtube\\.com\\/\\S*(?:(?:\\/e(?:mbed))?\\/|watch\\/?\\?(?:\\S*?&?v\\=))|youtu\\.be\\/)([a-zA-Z0-9_-]{6,11})/g;\n\n  return regex;\n};\n","module.exports = truncate;\n\n/*\n  truncate('when shall we three meet again', 9); // 'when s...'\n  truncate('when shall we three meet again', 10, ' (etc)'); // 'when (etc)'\n  truncate('when shall we', 15,); // 'when shall we'\n  truncate('when shall we', 15, '(more)'); // 'when shall we'\n  truncate('when shall we', 7, ' (more)'); // ' (more)'\n*/\n\nfunction truncate(str, length, end) {\n  if (length == null || length >= str.length) {\n    return str;\n  }\n  if (end == null) {\n    end = '...';\n  }\n  return str.slice(0, Math.max(0, length - end.length)) + end;\n}\n","import truncate from \"just-truncate\"\n\nexport default function(\n  { url, title, embedUrl, description, thumbnail },\n  thumbClassName,\n  showPlayIcon = false\n) {\nreturn `<div class=\"ejs-preview ejs-embed\"><div class=\"ejs-thumb ${thumbClassName}\" data-url=\"${embedUrl}\" style=\"background-image:url(${thumbnail})\">${showPlayIcon ? '<span>&#9658;</span>' : ''}</div><div class=\"ejs-info\"><h4 class=\"ejs-title\"><a href=\"${url}\">${title}</a></h4><div class=\"ejs-desc\">${truncate(\n    description,\n    150\n  )}</div></div></div>`\n}\n","export default function(embedUrl, height, name) {\n  return `<iframe class=\"ejs-embed ejs-${name}\" src=\"${embedUrl}\" frameBorder=\"0\" height=\"${height}\"></iframe>`\n}\n","import extend from \"just-extend\"\nimport { insert } from \"embed-plugin-utilities\"\n\nexport default opts => {\n  const defaultOptions = {\n    _replaceAnyways: false,\n    _ignoreAnchorCheck: false,\n    _ignoreInlineCheck: false,\n    onLoad() {}\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts)\n\n  const { _onLoadInternal, onLoad, regex, template, id } = pluginOptions\n\n  if (!regex) {\n    throw new Error(\"regex not passed.\")\n  }\n  if (!template) {\n    throw new Error(\"template not passed.\")\n  }\n\n  return {\n    id,\n\n    async transform(options) {\n      return extend({}, options, await insert(options, pluginOptions))\n    },\n\n    onLoad(options) {\n      if (_onLoadInternal) {\n        _onLoadInternal(options, pluginOptions)\n      }\n      if (onLoad) {\n        onLoad(options, pluginOptions)\n      }\n    }\n  }\n}\n"],"names":["extend","args","slice","call","arguments","deep","shift","result","Error","extenders","len","length","i","extender","key","hasOwnProperty","value","obj","Array","isArray","toString","isCloneable","base","concurrency","matches","replacer","const","promises","map","match","concat","index","input","apply","then","res","replacement","assignReplacement","Promise","all","stringReplaceAsync","str","re","lastIndex","resolve","exec","push","global","matchAll","reverse","reduce","prefix","postfix","replaceAll","processString","e","reject","isMatchPresent","regex","text","test","isAnchorTagApplied","ref","ref$1","RegExp","getAnchorRegex","plugins","filter","plugin","id","saveServiceName","_services","x","pushEmbedContent","options","pluginOptions","getTemplate","_embeds","content","$await_7","find","template","data","_process","$await_11","fetch","gAuthKey","console","log","$await_2","json","$await_3","items","fetchDetails","youtube","opts","defaultOptions","ytRegex","details","height","clickClass","onVideoShow","_onLoadInternal","isDom","let","classes","document","getElementsByClassName","onclick","url","this","getAttribute","parentNode","innerHTML","withoutDetailsTemplate","onLoad","embedUrl","baseUrl","withDetailsTemplate","snippet","title","thumbnail","thumbnails","medium","description","formatData","val","window","Node","nodeType","nodeName","anchorRegex","inlineEmbed","_ignoreAnchorCheck","_ignoreInlineCheck","replaceUrl","_replaceAnyways","string","getMatch","t","$await_14","anchorReplace","$await_12","basicReplace","output","$await_17","$await_9","saveEmbedData","end","Math","max","thumbClassName","showPlayIcon","truncate","name","transform","insert","$await_1"],"mappings":"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"}